Rust File
  RustUseImpl(USE)
    PsiElement(use)('use')
    PsiElement(IDENTIFIER)('std')
    PsiElement(::)('::')
    PsiElement(IDENTIFIER)('task')
    PsiElement(::)('::')
    PsiElement(IDENTIFIER)('spawn')
    PsiElement(;)(';')
  PsiComment(LINE_COMMENT)('// Takes a closure and prints its result')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('closure')
      RustGenericParamsImpl(GENERIC_PARAMS)
        PsiElement(<)('<')
        PsiElement(IDENTIFIER)('F')
        PsiElement(>)('>')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('F')
        PsiElement())(')')
      RustWhereClauseImpl(WHERE_CLAUSE)
        PsiElement(where)('where')
        RustWhereBoundImpl(WHERE_BOUND)
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('F')
          PsiElement(:)(':')
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('Fn')
            RustClosureSugarImpl(CLOSURE_SUGAR)
              PsiElement(()('(')
              PsiElement())(')')
              PsiElement(->)('->')
              RustTypeBasicImpl(TYPE_BASIC)
                PsiElement(IDENTIFIER)('int')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprMacroImpl(EXPR_MACRO)
        PsiElement(IDENTIFIER)('println')
        PsiElement(!)('!')
        RustMacroParenImpl(MACRO_PAREN)
          PsiElement(()('(')
          RustMacroBodyImpl(MACRO_BODY)
            PsiElement(STRING_LIT)('"{}"')
            PsiElement(,)(',')
            PsiElement(IDENTIFIER)('f')
            RustMacroParenImpl(MACRO_PAREN)
              PsiElement(()('(')
              RustMacroBodyImpl(MACRO_BODY)
                <empty list>
              PsiElement())(')')
          PsiElement())(')')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes a closure and calls it')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('typed_closure')
      RustGenericParamsImpl(GENERIC_PARAMS)
        PsiElement(<)('<')
        PsiElement(IDENTIFIER)('F')
        PsiElement(>)('>')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('F')
        PsiElement())(')')
      RustWhereClauseImpl(WHERE_CLAUSE)
        PsiElement(where)('where')
        RustWhereBoundImpl(WHERE_BOUND)
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('F')
          PsiElement(:)(':')
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('Fn')
            RustClosureSugarImpl(CLOSURE_SUGAR)
              PsiElement(()('(')
              RustTypeBasicImpl(TYPE_BASIC)
                PsiElement(IDENTIFIER)('int')
              PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('f')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprValueImpl(EXPR_VALUE)
            PsiElement(DEC_LIT)('42')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes a closure that takes a closure and calls it with its own closure')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('double_closure')
      RustGenericParamsImpl(GENERIC_PARAMS)
        PsiElement(<)('<')
        PsiElement(IDENTIFIER)('F')
        PsiElement(,)(',')
        PsiElement(IDENTIFIER)('G')
        PsiElement(>)('>')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('F')
        PsiElement())(')')
      RustWhereClauseImpl(WHERE_CLAUSE)
        PsiElement(where)('where')
        RustWhereBoundImpl(WHERE_BOUND)
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('F')
          PsiElement(:)(':')
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('Fn')
            RustClosureSugarImpl(CLOSURE_SUGAR)
              PsiElement(()('(')
              RustTypeBasicImpl(TYPE_BASIC)
                PsiElement(IDENTIFIER)('G')
              PsiElement())(')')
        PsiElement(,)(',')
        RustWhereBoundImpl(WHERE_BOUND)
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('G')
          PsiElement(:)(':')
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('Fn')
            RustClosureSugarImpl(CLOSURE_SUGAR)
              PsiElement(()('(')
              RustTypeBasicImpl(TYPE_BASIC)
                PsiElement(IDENTIFIER)('int')
              PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('f')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            RustClosureExprArgsImpl(CLOSURE_EXPR_ARGS)
              PsiElement(|)('|')
              RustLetArgsImpl(LET_ARGS)
                RustLetVariableBindImpl(LET_VARIABLE_BIND)
                  RustItemNameImpl(ITEM_NAME)
                    PsiElement(IDENTIFIER)('x')
              PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprMacroImpl(EXPR_MACRO)
                PsiElement(IDENTIFIER)('println')
                PsiElement(!)('!')
                RustMacroParenImpl(MACRO_PAREN)
                  PsiElement(()('(')
                  RustMacroBodyImpl(MACRO_BODY)
                    PsiElement(STRING_LIT)('"{}"')
                    PsiElement(,)(',')
                    PsiElement(IDENTIFIER)('x')
                    PsiElement(+)('+')
                    PsiElement(DEC_LIT)('1')
                  PsiElement())(')')
        PsiElement())(')')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes a reference to a closure')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('closure_ref')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBoundedImpl(TYPE_BOUNDED)
              RustRefImpl(REF)
                PsiElement(&)('&')
              PsiElement(IDENTIFIER)('Fn')
              RustClosureSugarImpl(CLOSURE_SUGAR)
                PsiElement(()('(')
                RustTypeBasicImpl(TYPE_BASIC)
                  PsiElement(IDENTIFIER)('Figure')
                PsiElement())(')')
                PsiElement(->)('->')
                RustTypeBasicImpl(TYPE_BASIC)
                  PsiElement(IDENTIFIER)('String')
              PsiElement(+)('+')
              RustTypeBasicImpl(TYPE_BASIC)
                PsiElement(IDENTIFIER)('Send')
        PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      PsiComment(LINE_COMMENT)('//...')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Takes boxed closure')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('boxed_closure')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('Box')
              RustGenericImpl(GENERIC)
                PsiElement(<)('<')
                RustTypeBoundedImpl(TYPE_BOUNDED)
                  PsiElement(IDENTIFIER)('Fn')
                  RustClosureSugarImpl(CLOSURE_SUGAR)
                    PsiElement(()('(')
                    RustTypeBasicImpl(TYPE_BASIC)
                      PsiElement(IDENTIFIER)('Figure')
                    PsiElement())(')')
                    PsiElement(->)('->')
                    RustTypeBasicImpl(TYPE_BASIC)
                      PsiElement(IDENTIFIER)('String')
                  PsiElement(+)('+')
                  RustTypeBasicImpl(TYPE_BASIC)
                    PsiElement(IDENTIFIER)('Send')
                PsiElement(>)('>')
        PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      PsiComment(LINE_COMMENT)('//...')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Not so simple closure signature')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('some_func')
      RustGenericParamsImpl(GENERIC_PARAMS)
        PsiElement(<)('<')
        PsiElement(IDENTIFIER)('F')
        PsiElement(>)('>')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          RustLetVariableBindImpl(LET_VARIABLE_BIND)
            RustItemNameImpl(ITEM_NAME)
              PsiElement(IDENTIFIER)('f')
            PsiElement(:)(':')
            RustTypeBasicImpl(TYPE_BASIC)
              PsiElement(IDENTIFIER)('F')
        PsiElement())(')')
      RustWhereClauseImpl(WHERE_CLAUSE)
        PsiElement(where)('where')
        RustWhereBoundImpl(WHERE_BOUND)
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('F')
          PsiElement(:)(':')
          RustTypeBasicImpl(TYPE_BASIC)
            PsiElement(IDENTIFIER)('Fn')
            RustClosureSugarImpl(CLOSURE_SUGAR)
              PsiElement(()('(')
              RustTypeBasicImpl(TYPE_BASIC)
                RustRefImpl(REF)
                  PsiElement(&)('&')
                PsiElement(IDENTIFIER)('Figure')
              PsiElement(,)(',')
              RustTypeTupleImpl(TYPE_TUPLE)
                PsiElement(()('(')
                RustTypeBasicImpl(TYPE_BASIC)
                  RustRefImpl(REF)
                    PsiElement(&)('&')
                  PsiElement(IDENTIFIER)('Shape')
                PsiElement(,)(',')
                RustTypeBasicImpl(TYPE_BASIC)
                  PsiElement(IDENTIFIER)('char')
                PsiElement())(')')
              PsiElement())(')')
              PsiElement(->)('->')
              RustTypeVectorImpl(TYPE_VECTOR)
                PsiElement([)('[')
                RustTypeBasicImpl(TYPE_BASIC)
                  PsiElement(IDENTIFIER)('String')
                PsiElement(;)(';')
                RustExprValueImpl(EXPR_VALUE)
                  PsiElement(DEC_LIT)('4')
                PsiElement(])(']')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      PsiComment(LINE_COMMENT)('//...')
      PsiElement(})('}')
  PsiComment(LINE_COMMENT)('// Some typedefs')
  RustTypeItemImpl(TYPE_ITEM)
    PsiElement(type)('type')
    RustItemNameImpl(ITEM_NAME)
      PsiElement(IDENTIFIER)('MyFn1')
    RustGenericParamsImpl(GENERIC_PARAMS)
      PsiElement(<)('<')
      RustLifetimeImpl(LIFETIME)
        PsiElement(')(''')
        PsiElement(IDENTIFIER)('a')
      PsiElement(>)('>')
    PsiElement(=)('=')
    RustTypeBoundedImpl(TYPE_BOUNDED)
      PsiElement(IDENTIFIER)('FnMut')
      RustClosureSugarImpl(CLOSURE_SUGAR)
        PsiElement(()('(')
        RustTypeBasicImpl(TYPE_BASIC)
          PsiElement(IDENTIFIER)('u32')
        PsiElement())(')')
        PsiElement(->)('->')
        RustTypeBasicImpl(TYPE_BASIC)
          PsiElement(IDENTIFIER)('String')
      PsiElement(+)('+')
      RustLifetimeImpl(LIFETIME)
        PsiElement(')(''')
        PsiElement(IDENTIFIER)('a')
    PsiElement(;)(';')
  RustTypeItemImpl(TYPE_ITEM)
    PsiElement(type)('type')
    RustItemNameImpl(ITEM_NAME)
      PsiElement(IDENTIFIER)('MyFn2')
    RustGenericParamsImpl(GENERIC_PARAMS)
      PsiElement(<)('<')
      RustLifetimeImpl(LIFETIME)
        PsiElement(')(''')
        PsiElement(IDENTIFIER)('a')
      PsiElement(>)('>')
    PsiElement(=)('=')
    RustTypeBoundedImpl(TYPE_BOUNDED)
      PsiElement(IDENTIFIER)('FnOnce')
      RustClosureSugarImpl(CLOSURE_SUGAR)
        PsiElement(()('(')
        RustTypeBasicImpl(TYPE_BASIC)
          PsiElement(IDENTIFIER)('Figure')
        PsiElement())(')')
      PsiElement(+)('+')
      RustLifetimeImpl(LIFETIME)
        PsiElement(')(''')
        PsiElement(IDENTIFIER)('a')
    PsiElement(;)(';')
  RustFnItemImpl(FN_ITEM)
    RustFnDeclarationImpl(FN_DECLARATION)
      RustVisibilityImpl(VISIBILITY)
        PsiElement(pub)('pub')
      PsiElement(fn)('fn')
      RustItemNameImpl(ITEM_NAME)
        PsiElement(IDENTIFIER)('main')
      RustFnArgsImpl(FN_ARGS)
        PsiElement(()('(')
        RustLetArgsImpl(LET_ARGS)
          <empty list>
        PsiElement())(')')
    RustStatementBlockImpl(STATEMENT_BLOCK)
      PsiElement({)('{')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            RustClosureExprArgsImpl(CLOSURE_EXPR_ARGS)
              PsiElement(|)('|')
              RustLetArgsImpl(LET_ARGS)
                <empty list>
              PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprValueImpl(EXPR_VALUE)
                PsiElement(DEC_LIT)('1')
        PsiElement())(')')
      PsiElement(;)(';')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('typed_closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            RustClosureExprArgsImpl(CLOSURE_EXPR_ARGS)
              PsiElement(|)('|')
              RustLetArgsImpl(LET_ARGS)
                RustLetVariableBindImpl(LET_VARIABLE_BIND)
                  RustItemNameImpl(ITEM_NAME)
                    PsiElement(IDENTIFIER)('a')
              PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprMacroImpl(EXPR_MACRO)
                PsiElement(IDENTIFIER)('println')
                PsiElement(!)('!')
                RustMacroParenImpl(MACRO_PAREN)
                  PsiElement(()('(')
                  RustMacroBodyImpl(MACRO_BODY)
                    PsiElement(STRING_LIT)('"typed {}"')
                    PsiElement(,)(',')
                    PsiElement(IDENTIFIER)('a')
                  PsiElement())(')')
        PsiElement())(')')
      PsiElement(;)(';')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('double_closure')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            RustClosureExprArgsImpl(CLOSURE_EXPR_ARGS)
              PsiElement(|)('|')
              RustLetArgsImpl(LET_ARGS)
                RustLetVariableBindImpl(LET_VARIABLE_BIND)
                  RustItemNameImpl(ITEM_NAME)
                    PsiElement(IDENTIFIER)('g')
              PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprCallImpl(EXPR_CALL)
                RustExprPathImpl(EXPR_PATH)
                  PsiElement(IDENTIFIER)('g')
                PsiElement(()('(')
                RustCallParamsImpl(CALL_PARAMS)
                  RustExprValueImpl(EXPR_VALUE)
                    PsiElement(DEC_LIT)('1')
                PsiElement())(')')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiComment(LINE_COMMENT)('// move || is the closure which will be spawned.')
      RustExprCallImpl(EXPR_CALL)
        RustExprPathImpl(EXPR_PATH)
          PsiElement(IDENTIFIER)('spawn')
        PsiElement(()('(')
        RustCallParamsImpl(CALL_PARAMS)
          RustExprClosureImpl(EXPR_CLOSURE)
            PsiElement(move)('move')
            RustClosureExprArgsImpl(CLOSURE_EXPR_ARGS)
              PsiElement(|)('|')
              RustLetArgsImpl(LET_ARGS)
                <empty list>
              PsiElement(|)('|')
            RustClosureBodyImpl(CLOSURE_BODY)
              RustExprBlockImpl(EXPR_BLOCK)
                RustStatementBlockImpl(STATEMENT_BLOCK)
                  PsiElement({)('{')
                  RustExprMacroImpl(EXPR_MACRO)
                    PsiElement(IDENTIFIER)('println')
                    PsiElement(!)('!')
                    RustMacroParenImpl(MACRO_PAREN)
                      PsiElement(()('(')
                      RustMacroBodyImpl(MACRO_BODY)
                        PsiElement(STRING_LIT)('"I'm a new task"')
                      PsiElement())(')')
                  PsiElement(})('}')
        PsiElement())(')')
      PsiElement(;)(';')
      PsiElement(})('}')